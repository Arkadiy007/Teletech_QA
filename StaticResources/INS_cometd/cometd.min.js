if(typeof dojo!=="undefined"){dojo.provide("org.cometd")}else{this.org=this.org||{};org.cometd={}}org.cometd.JSON={};org.cometd.JSON.toJSON=org.cometd.JSON.fromJSON=function(e){throw"Abstract"};org.cometd.Utils={};org.cometd.Utils.isString=function(e){if(e===undefined||e===null){return false}return typeof e==="string"||e instanceof String};org.cometd.Utils.isArray=function(e){if(e===undefined||e===null){return false}return e instanceof Array};org.cometd.Utils.inArray=function(e,t){for(var n=0;n<t.length;++n){if(e==t[n]){return n}}return-1};org.cometd.Utils.setTimeout=function(e,t,n){return setTimeout(function(){try{t()}catch(n){e._debug("Exception invoking timed function",t,n)}},n)};org.cometd.TransportRegistry=function(){var e=[];var t={};this.getTransportTypes=function(){return e.slice(0)};this.findTransportTypes=function(n,r,i){var s=[];for(var o=0;o<e.length;++o){var u=e[o];if(t[u].accept(n,r,i)===true){s.push(u)}}return s};this.negotiateTransport=function(n,r,i,s){for(var o=0;o<e.length;++o){var u=e[o];for(var a=0;a<n.length;++a){if(u==n[a]){var f=t[u];if(f.accept(r,i,s)===true){return f}}}}return null};this.add=function(n,r,i){var s=false;for(var o=0;o<e.length;++o){if(e[o]==n){s=true;break}}if(!s){if(typeof i!=="number"){e.push(n)}else{e.splice(i,0,n)}t[n]=r}return!s};this.find=function(n){for(var r=0;r<e.length;++r){if(e[r]==n){return t[n]}}return null};this.remove=function(n){for(var r=0;r<e.length;++r){if(e[r]==n){e.splice(r,1);var i=t[n];delete t[n];return i}}return null};this.reset=function(){for(var n=0;n<e.length;++n){t[e[n]].reset()}}};org.cometd.Transport=function(){var e;var t;this.registered=function(n,r){e=n;t=r};this.unregistered=function(){e=null;t=null};this._debug=function(){t._debug.apply(t,arguments)};this._mixin=function(){return t._mixin.apply(t,arguments)};this.getConfiguration=function(){return t.getConfiguration()};this.getAdvice=function(){return t.getAdvice()};this.setTimeout=function(e,n){return org.cometd.Utils.setTimeout(t,e,n)};this.convertToMessages=function(e){if(org.cometd.Utils.isString(e)){try{return org.cometd.JSON.fromJSON(e)}catch(t){this._debug("Could not convert to JSON the following string",'"'+e+'"');throw t}}if(org.cometd.Utils.isArray(e)){return e}if(e===undefined||e===null){return[]}if(e instanceof Object){return[e]}throw"Conversion Error "+e+", typeof "+typeof e};this.accept=function(e,t,n){throw"Abstract"};this.getType=function(){return e};this.send=function(e,t){throw"Abstract"};this.reset=function(){this._debug("Transport",e,"reset")};this.abort=function(){this._debug("Transport",e,"aborted")};this.toString=function(){return this.getType()}};org.cometd.Transport.derive=function(e){function t(){}t.prototype=e;return new t};org.cometd.RequestTransport=function(){function o(e){while(s.length>0){var t=s[0];var n=t[0];var r=t[1];if(n.url===e.url&&n.sync===e.sync){s.shift();e.messages=e.messages.concat(n.messages);this._debug("Coalesced",n.messages.length,"messages from request",r.id);continue}break}}function u(e,t){this.transportSend(e,t);t.expired=false;if(!e.sync){var n=this.getConfiguration().maxNetworkDelay;var r=n;if(t.metaConnect===true){r+=this.getAdvice().timeout}this._debug("Transport",this.getType(),"waiting at most",r,"ms for the response, maxNetworkDelay",n);var i=this;t.timeout=this.setTimeout(function(){t.expired=true;if(t.xhr){t.xhr.abort()}var n="Request "+t.id+" of transport "+i.getType()+" exceeded "+r+" ms max network delay";i._debug(n);i.complete(t,false,t.metaConnect);e.onFailure(t.xhr,e.messages,"timeout",n)},r)}}function a(e){var t=++n;var r={id:t,metaConnect:false};if(i.length<this.getConfiguration().maxConnections-1){i.push(r);u.call(this,e,r)}else{this._debug("Transport",this.getType(),"queueing request",t,"envelope",e);s.push([e,r])}}function f(e){var t=e.id;this._debug("Transport",this.getType(),"metaConnect complete, request",t);if(r!==null&&r.id!==t){throw"Longpoll request mismatch, completing request "+t}r=null}function l(e,t){var n=org.cometd.Utils.inArray(e,i);if(n>=0){i.splice(n,1)}if(s.length>0){var r=s.shift();var u=r[0];var f=r[1];this._debug("Transport dequeued request",f.id);if(t){if(this.getConfiguration().autoBatch){o.call(this,u)}a.call(this,u);this._debug("Transport completed request",e.id,u)}else{var l=this;this.setTimeout(function(){l.complete(f,false,f.metaConnect);u.onFailure(f.xhr,u.messages,"error","Previous request failed")},0)}}}function c(e){if(r!==null){throw"Concurrent metaConnect requests not allowed, request id="+r.id+" not yet completed"}var t=++n;this._debug("Transport",this.getType(),"metaConnect send, request",t,"envelope",e);var i={id:t,metaConnect:true};u.call(this,e,i);r=i}var e=new org.cometd.Transport;var t=org.cometd.Transport.derive(e);var n=0;var r=null;var i=[];var s=[];t.complete=function(e,t,n){if(n){f.call(this,e)}else{l.call(this,e,t)}};t.transportSend=function(e,t){throw"Abstract"};t.transportSuccess=function(e,t,n){if(!t.expired){clearTimeout(t.timeout);this.complete(t,true,t.metaConnect);if(n&&n.length>0){e.onSuccess(n)}else{e.onFailure(t.xhr,e.messages,"Empty HTTP response")}}};t.transportFailure=function(e,t,n,r){if(!t.expired){clearTimeout(t.timeout);this.complete(t,false,t.metaConnect);e.onFailure(t.xhr,e.messages,n,r)}};t.send=function(e,t){if(t){c.call(this,e)}else{a.call(this,e)}};t.abort=function(){e.abort();for(var t=0;t<i.length;++t){var n=i[t];this._debug("Aborting request",n);if(n.xhr){n.xhr.abort()}}if(r){this._debug("Aborting metaConnect request",r);if(r.xhr){r.xhr.abort()}}this.reset()};t.reset=function(){e.reset();r=null;i=[];s=[]};return t};org.cometd.LongPollingTransport=function(){var e=new org.cometd.RequestTransport;var t=org.cometd.Transport.derive(e);var n=true;t.accept=function(e,t,r){return n||!t};t.xhrSend=function(e){throw"Abstract"};t.transportSend=function(e,t){this._debug("Transport",this.getType(),"sending request",t.id,"envelope",e);var r=this;try{var i=true;t.xhr=this.xhrSend({transport:this,url:e.url,sync:e.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(e.messages),onSuccess:function(i){r._debug("Transport",r.getType(),"received response",i);var s=false;try{var o=r.convertToMessages(i);if(o.length===0){n=false;r.transportFailure(e,t,"no response",null)}else{s=true;r.transportSuccess(e,t,o)}}catch(u){r._debug(u);if(!s){n=false;r.transportFailure(e,t,"bad response",u)}}},onError:function(s,o){n=false;if(i){r.setTimeout(function(){r.transportFailure(e,t,s,o)},0)}else{r.transportFailure(e,t,s,o)}}});i=false}catch(s){n=false;this.setTimeout(function(){r.transportFailure(e,t,"error",s)},0)}};t.reset=function(){e.reset();n=true};return t};org.cometd.CallbackPollingTransport=function(){var e=new org.cometd.RequestTransport;var t=org.cometd.Transport.derive(e);var n=2e3;t.accept=function(e,t,n){return true};t.jsonpSend=function(e){throw"Abstract"};t.transportSend=function(e,t){var r=this;var i=0;var s=e.messages.length;var o=[];while(s>0){var u=org.cometd.JSON.toJSON(e.messages.slice(i,i+s));var a=e.url.length+encodeURI(u).length;if(a>n){if(s==1){var f="Bayeux message too big ("+a+" bytes, max is "+n+") "+"for transport "+this.getType();this.setTimeout(function(){r.transportFailure(e,t,"error",f)},0);return}--s;continue}o.push(s);i+=s;s=e.messages.length-i}var l=e;if(o.length>1){var c=0;var h=o[0];this._debug("Transport",this.getType(),"split",e.messages.length,"messages into",o.join(" + "));l=this._mixin(false,{},e);l.messages=e.messages.slice(c,h);l.onSuccess=e.onSuccess;l.onFailure=e.onFailure;for(var p=1;p<o.length;++p){var d=this._mixin(false,{},e);c=h;h+=o[p];d.messages=e.messages.slice(c,h);d.onSuccess=e.onSuccess;d.onFailure=e.onFailure;this.send(d,t.metaConnect)}}this._debug("Transport",this.getType(),"sending request",t.id,"envelope",l);try{var v=true;this.jsonpSend({transport:this,url:l.url,sync:l.sync,headers:this.getConfiguration().requestHeaders,body:org.cometd.JSON.toJSON(l.messages),onSuccess:function(e){var n=false;try{var i=r.convertToMessages(e);if(i.length===0){r.transportFailure(l,t,"no response")}else{n=true;r.transportSuccess(l,t,i)}}catch(s){r._debug(s);if(!n){r.transportFailure(l,t,"bad response",s)}}},onError:function(e,n){if(v){r.setTimeout(function(){r.transportFailure(l,t,e,n)},0)}else{r.transportFailure(l,t,e,n)}}});v=false}catch(m){this.setTimeout(function(){r.transportFailure(l,t,"error",m)},0)}};return t};org.cometd.WebSocketTransport=function(){function h(e,t){try{var n=org.cometd.JSON.toJSON(e.messages);l.send(n);this._debug("Transport",this.getType(),"sent",e,"metaConnect =",t);var r=this.getConfiguration().maxNetworkDelay;var i=r;if(t){i+=this.getAdvice().timeout}var s=[];for(var o=0;o<e.messages.length;++o){var u=e.messages[o];if(u.id){s.push(u.id);var c=this;a[u.id]=this.setTimeout(function(){var t="Message "+u.id+" of transport "+c.getType()+" exceeded "+i+" ms max network delay";c._debug(t);delete a[u.id];for(var n in f){if(f[n]===e){delete f[n];break}}e.onFailure(l,e.messages,"timeout",t)},i)}}this._debug("Transport",this.getType(),"waiting at most",i," ms for messages",s,"maxNetworkDelay",r,", timeouts:",a)}catch(h){this.setTimeout(function(){e.onFailure(l,e.messages,"error",h)},0)}}var e=1;var t=2;var n=new org.cometd.Transport;var r=org.cometd.Transport.derive(n);var i;var s=true;var o=false;var u=t;var a={};var f={};var l;var c;r.registered=function(e,t){n.registered(e,t);i=t};r.accept=function(e,t,n){return s&&!!window.WebSocket&&i.websocketEnabled===true};r.onMessage=function(t){this._debug("Transport",this.getType(),"received websocket message",t);if(u===e){var n=this.convertToMessages(t.data);var r=[];for(var i=0;i<n.length;++i){var s=n[i];if(/^\/meta\//.test(s.channel)||s.data===undefined){if(s.id){r.push(s.id);var o=a[s.id];if(o){clearTimeout(o);delete a[s.id];this._debug("Transport",this.getType(),"removed timeout for message",s.id,", timeouts",a)}}}if("/meta/disconnect"===s.channel&&s.successful){l.close()}}var h=false;for(var p=0;p<r.length;++p){var d=r[p];for(var v in f){var m=v.split(",");var g=org.cometd.Utils.inArray(d,m);if(g>=0){h=true;m.splice(g,1);var y=f[v];delete f[v];if(m.length>0){f[m.join(",")]=y}break}}}if(h){this._debug("Transport",this.getType(),"removed envelope, envelopes",f)}c.call(this,n)}};r.onClose=function(){this._debug("Transport",this.getType(),"closed",l);s=o;for(var e in a){clearTimeout(a[e]);delete a[e]}for(var n in f){f[n].onFailure(l,f[n].messages,"closed");delete f[n]}u=t};r.send=function(t,n){this._debug("Transport",this.getType(),"sending",t,"metaConnect =",n);var r=[];for(var i=0;i<t.messages.length;++i){var s=t.messages[i];if(s.id){r.push(s.id)}}f[r.join(",")]=t;this._debug("Transport",this.getType(),"stored envelope, envelopes",f);if(u===e){h.call(this,t,n)}else{var a=t.url.replace(/^http/,"ws");this._debug("Transport",this.getType(),"connecting to URL",a);l=new window.WebSocket(a);var p=this;l.onopen=function(){p._debug("WebSocket opened",l);o=true;u=e;c=t.onSuccess;h.call(p,t,n)};l.onclose=function(){p.onClose()};l.onmessage=function(e){p.onMessage(e)}}};r.reset=function(){n.reset();if(l){l.close()}s=true;o=false;u=t;a={};f={};l=null;c=null};return r};org.cometd.Cometd=function(e){function E(e,t,n){var r=t||{};for(var i=2;i<arguments.length;++i){var s=arguments[i];if(s===undefined||s===null){continue}for(var o in s){var u=s[o];if(u===t){continue}if(u===undefined){continue}if(e&&typeof u==="object"&&u!==null){if(u instanceof Array){r[o]=E(e,[],u)}else{r[o]=E(e,{},u)}}else{r[o]=u}}}return r}function S(e){return org.cometd.Utils.isString(e)}function x(e){if(e===undefined||e===null){return false}return typeof e==="function"}function T(e,t){if(window.console){var n=window.console[e];if(x(n)){n.apply(window.console,t)}}}function N(){T("warn",arguments)}function C(){if(w.logLevel!="warn"){T("info",arguments)}}function k(){if(w.logLevel=="debug"){T("debug",arguments)}}function L(e){k("Configuring cometd object with",e);if(S(e)){e={url:e}}if(!e){e={}}w=E(false,w,e);if(!w.url){throw"Missing required configuration parameter 'url' specifying the Bayeux server URL"}var t=/(^https?:)?(\/\/(([^:\/\?#]+)(:(\d+))?))?([^\?#]*)(.*)?/.exec(w.url);r=t[3]&&t[3]!=window.location.host;if(w.appendMessageTypeToURL){if(t[8]!==undefined&&t[8].length>0){C("Appending message type to URI "+t[7]+t[8]+" is not supported, disabling 'appendMessageTypeToURL' configuration");w.appendMessageTypeToURL=false}else{var n=t[7].split("/");var i=n.length-1;if(t[7].match(/\/$/)){i-=1}if(n[i].indexOf(".")>=0){C("Appending message type to URI "+t[7]+" is not supported, disabling 'appendMessageTypeToURL' configuration");w.appendMessageTypeToURL=false}}}}function A(){for(var e in h){var t=h[e];for(var n=0;n<t.length;++n){var r=t[n];if(r&&!r.listener){delete t[n];k("Removed subscription",r,"for channel",e)}}}}function O(e){if(o!=e){k("Status",o,"->",e);o=e}}function M(){return o=="disconnecting"||o=="disconnected"}function _(){return++u}function D(e,n,r,i,s){try{return n.call(e,i)}catch(o){k("Exception during execution of extension",r,o);var u=t.onExtensionException;if(x(u)){k("Invoking extension exception callback",r,o);try{u.call(t,o,r,s,i)}catch(a){C("Exception during execution of exception callback in extension",r,a)}}return i}}function P(e){for(var t=0;t<v.length;++t){if(e===undefined||e===null){break}var n=w.reverseIncomingExtensions?v.length-1-t:t;var r=v[n];var i=r.extension.incoming;if(x(i)){var s=D(r.extension,i,r.name,e,false);e=s===undefined?e:s}}return e}function H(e){for(var t=0;t<v.length;++t){if(e===undefined||e===null){break}var n=v[t];var r=n.extension.outgoing;if(x(r)){var i=D(n.extension,r,n.name,e,true);e=i===undefined?e:i}}return e}function B(e,n){var r=h[e];if(r&&r.length>0){for(var i=0;i<r.length;++i){var s=r[i];if(s){try{s.callback.call(s.scope,n)}catch(o){k("Exception during notification",s,n,o);var u=t.onListenerException;if(x(u)){k("Invoking listener exception callback",s,o);try{u.call(t,o,s.handle,s.listener,n)}catch(a){C("Exception during execution of listener callback",s,a)}}}}}}}function j(e,t){B(e,t);var n=e.split("/");var r=n.length-1;for(var i=r;i>0;--i){var s=n.slice(0,i).join("/")+"/*";if(i==r){B(s,t)}s+="*";B(s,t)}}function F(){if(d!==null){clearTimeout(d)}d=null}function I(e){F();var n=m.interval+p;k("Function scheduled in",n,"ms, interval =",m.interval,"backoff =",p,e);d=org.cometd.Utils.setTimeout(t,e,n)}function U(e,n,r,i){for(var o=0;o<n.length;++o){var u=n[o];u.id=""+_();if(a){u.clientId=a}u=H(u);if(u!==undefined&&u!==null){n[o]=u}else{n.splice(o--,1)}}if(n.length===0){return}var f=w.url;if(w.appendMessageTypeToURL){if(!f.match(/\/$/)){f=f+"/"}if(i){f=f+i}}var l={url:f,sync:e,messages:n,onSuccess:function(e){try{q.call(t,e)}catch(n){k("Exception during handling of messages",n)}},onFailure:function(e,n,r,i){try{R.call(t,e,n,r,i)}catch(s){k("Exception during handling of failure",s)}}};k("Send",l);s.send(l,r)}function z(e){if(f>0||c===true){l.push(e)}else{U(false,[e],false)}}function W(){p=0}function X(){if(p<w.maxBackoff){p+=w.backoffIncrement}}function V(){++f}function $(){var e=l;l=[];if(e.length>0){U(false,e,false)}}function J(){--f;if(f<0){throw"Calls to startBatch() and endBatch() are not paired"}if(f===0&&!M()&&!c){$()}}function K(){if(!M()){var e={channel:"/meta/connect",connectionType:s.getType()};if(!b){e.advice={timeout:0}}O("connecting");k("Connect sent",e);U(false,[e],true,"connect");O("connected")}}function Q(){O("connecting");I(function(){K()})}function G(e){if(e){m=E(false,{},w.advice,e);k("New advice",m)}}function Y(e){F();if(e){s.abort()}a=null;O("disconnected");f=0;W();if(l.length>0){R.call(t,undefined,l,"error","Disconnected");l=[]}}function Z(e){a=null;A();if(M()){i.reset();G(w.advice)}else{G(E(false,m,{reconnect:"retry"}))}f=0;c=true;g=e;var t="1.0";var n=i.findTransportTypes(t,r,w.url);var o={version:t,minimumVersion:"0.9",channel:"/meta/handshake",supportedConnectionTypes:n,advice:{timeout:m.timeout,interval:m.interval}};var u=E(false,{},g,o);s=i.negotiateTransport(n,t,r,w.url);k("Initial transport is",s.getType());O("handshaking");k("Handshake sent",u);U(false,[u],false,"handshake")}function et(){O("handshaking");c=true;I(function(){Z(g)})}function tt(e){j("/meta/handshake",e);j("/meta/unsuccessful",e);var t=!M()&&m.reconnect!="none";if(t){X();et()}else{Y(false)}}function nt(e){if(e.successful){a=e.clientId;var t=i.negotiateTransport(e.supportedConnectionTypes,e.version,r,w.url);if(t===null){throw"Could not negotiate transport with server; client "+i.findTransportTypes(e.version,r,w.url)+", server "+e.supportedConnectionTypes}else if(s!=t){k("Transport",s,"->",t);s=t}c=false;$();e.reestablish=y;y=true;j("/meta/handshake",e);var n=M()?"none":m.reconnect;switch(n){case"retry":W();Q();break;case"none":Y(false);break;default:throw"Unrecognized advice action "+n}}else{tt(e)}}function rt(e,t){tt({successful:false,failure:true,channel:"/meta/handshake",request:t,xhr:e,advice:{reconnect:"retry",interval:p}})}function it(e){j("/meta/connect",e);j("/meta/unsuccessful",e);var t=M()?"none":m.reconnect;switch(t){case"retry":X();Q();break;case"handshake":i.reset();W();et();break;case"none":Y(false);break;default:throw"Unrecognized advice action"+t}}function st(e){b=e.successful;if(b){j("/meta/connect",e);var t=M()?"none":m.reconnect;switch(t){case"retry":W();Q();break;case"none":Y(false);break;default:throw"Unrecognized advice action "+t}}else{it(e)}}function ot(e,t){b=false;it({successful:false,failure:true,channel:"/meta/connect",request:t,xhr:e,advice:{reconnect:"retry",interval:p}})}function ut(e){Y(true);j("/meta/disconnect",e);j("/meta/unsuccessful",e)}function at(e){if(e.successful){Y(false);j("/meta/disconnect",e)}else{ut(e)}}function ft(e,t){ut({successful:false,failure:true,channel:"/meta/disconnect",request:t,xhr:e,advice:{reconnect:"none",interval:0}})}function lt(e){j("/meta/subscribe",e);j("/meta/unsuccessful",e)}function ct(e){if(e.successful){j("/meta/subscribe",e)}else{lt(e)}}function ht(e,t){lt({successful:false,failure:true,channel:"/meta/subscribe",request:t,xhr:e,advice:{reconnect:"none",interval:0}})}function pt(e){j("/meta/unsubscribe",e);j("/meta/unsuccessful",e)}function dt(e){if(e.successful){j("/meta/unsubscribe",e)}else{pt(e)}}function vt(e,t){pt({successful:false,failure:true,channel:"/meta/unsubscribe",request:t,xhr:e,advice:{reconnect:"none",interval:0}})}function mt(e){j("/meta/publish",e);j("/meta/unsuccessful",e)}function gt(e){if(e.successful===undefined){if(e.data){j(e.channel,e)}else{k("Unknown message",e)}}else{if(e.successful){j("/meta/publish",e)}else{mt(e)}}}function yt(e,t){mt({successful:false,failure:true,channel:t.channel,request:t,xhr:e,advice:{reconnect:"none",interval:0}})}function bt(e){e=P(e);if(e===undefined||e===null){return}G(e.advice);var t=e.channel;switch(t){case"/meta/handshake":nt(e);break;case"/meta/connect":st(e);break;case"/meta/disconnect":at(e);break;case"/meta/subscribe":ct(e);break;case"/meta/unsubscribe":dt(e);break;default:gt(e);break}}function wt(e){var t=h[e];if(t){for(var n=0;n<t.length;++n){if(t[n]){return true}}}return false}function Et(e,t){var n={scope:e,method:t};if(x(e)){n.scope=undefined;n.method=e}else{if(S(t)){if(!e){throw"Invalid scope "+e}n.method=e[t];if(!x(n.method)){throw"Invalid callback "+t+" for scope "+e}}else if(!x(t)){throw"Invalid callback "+t}}return n}function St(e,t,n,r){var i=Et(t,n);k("Adding listener on",e,"with scope",i.scope,"and callback",i.method);var s={channel:e,scope:i.scope,callback:i.method,listener:r};var o=h[e];if(!o){o=[];h[e]=o}var u=o.push(s)-1;s.id=u;s.handle=[e,u];k("Added listener",s,"for channel",e,"having id =",u);return s.handle}function xt(e){var t=h[e[0]];if(t){delete t[e[1]];k("Removed listener",e)}}var t=this;var n=e||"default";var r=false;var i=new org.cometd.TransportRegistry;var s;var o="disconnected";var u=0;var a=null;var f=0;var l=[];var c=false;var h={};var p=0;var d=null;var v=[];var m={};var g;var y=false;var b=false;var w={maxConnections:2,backoffIncrement:1e3,maxBackoff:6e4,logLevel:"info",reverseIncomingExtensions:true,maxNetworkDelay:1e4,requestHeaders:{},appendMessageTypeToURL:true,autoBatch:false,advice:{timeout:6e4,interval:0,reconnect:"retry"}};this._mixin=E;this._warn=N;this._info=C;this._debug=k;var q;var R;this.send=z;this.receive=bt;q=function(t){k("Received",t);for(var n=0;n<t.length;++n){var r=t[n];bt(r)}};R=function(t,n,r,i){k("handleFailure",t,n,r,i);for(var s=0;s<n.length;++s){var o=n[s];var u=o.channel;switch(u){case"/meta/handshake":rt(t,o);break;case"/meta/connect":ot(t,o);break;case"/meta/disconnect":ft(t,o);break;case"/meta/subscribe":ht(t,o);break;case"/meta/unsubscribe":vt(t,o);break;default:yt(t,o);break}}};this.registerTransport=function(e,t,n){var r=i.add(e,t,n);if(r){k("Registered transport",e);if(x(t.registered)){t.registered(e,this)}}return r};this.getTransportTypes=function(){return i.getTransportTypes()};this.unregisterTransport=function(e){var t=i.remove(e);if(t!==null){k("Unregistered transport",e);if(x(t.unregistered)){t.unregistered()}}return t};this.findTransport=function(e){return i.find(e)};this.configure=function(e){L.call(this,e)};this.init=function(e,t){this.configure(e);this.handshake(t)};this.handshake=function(e){O("disconnected");y=false;Z(e)};this.disconnect=function(e,t){if(M()){return}if(t===undefined){if(typeof e!=="boolean"){t=e;e=false}}var n={channel:"/meta/disconnect"};var r=E(false,{},t,n);O("disconnecting");U(e===true,[r],false,"disconnect")};this.startBatch=function(){V()};this.endBatch=function(){J()};this.batch=function(e,t){var n=Et(e,t);this.startBatch();try{n.method.call(n.scope);this.endBatch()}catch(r){k("Exception during execution of batch",r);this.endBatch();throw r}};this.addListener=function(e,t,n){if(arguments.length<2){throw"Illegal arguments number: required 2, got "+arguments.length}if(!S(e)){throw"Illegal argument type: channel must be a string"}return St(e,t,n,true)};this.removeListener=function(e){if(!org.cometd.Utils.isArray(e)){throw"Invalid argument: expected subscription, not "+e}xt(e)};this.clearListeners=function(){h={}};this.subscribe=function(e,t,n,r){if(arguments.length<2){throw"Illegal arguments number: required 2, got "+arguments.length}if(!S(e)){throw"Illegal argument type: channel must be a string"}if(M()){throw"Illegal state: already disconnected"}if(x(t)){r=n;n=t;t=undefined}var i=!wt(e);var s=St(e,t,n,false);if(i){var o={channel:"/meta/subscribe",subscription:e};var u=E(false,{},r,o);z(u)}return s};this.unsubscribe=function(e,t){if(arguments.length<1){throw"Illegal arguments number: required 1, got "+arguments.length}if(M()){throw"Illegal state: already disconnected"}this.removeListener(e);var n=e[0];if(!wt(n)){var r={channel:"/meta/unsubscribe",subscription:n};var i=E(false,{},t,r);z(i)}};this.clearSubscriptions=function(){A()};this.publish=function(e,t,n){if(arguments.length<1){throw"Illegal arguments number: required 1, got "+arguments.length}if(!S(e)){throw"Illegal argument type: channel must be a string"}if(M()){throw"Illegal state: already disconnected"}var r={channel:e,data:t};var i=E(false,{},n,r);z(i)};this.getStatus=function(){return o};this.isDisconnected=M;this.setBackoffIncrement=function(e){w.backoffIncrement=e};this.getBackoffIncrement=function(){return w.backoffIncrement};this.getBackoffPeriod=function(){return p};this.setLogLevel=function(e){w.logLevel=e};this.registerExtension=function(e,t){if(arguments.length<2){throw"Illegal arguments number: required 2, got "+arguments.length}if(!S(e)){throw"Illegal argument type: extension name must be a string"}var n=false;for(var r=0;r<v.length;++r){var i=v[r];if(i.name==e){n=true;break}}if(!n){v.push({name:e,extension:t});k("Registered extension",e);if(x(t.registered)){t.registered(e,this)}return true}else{C("Could not register extension with name",e,"since another extension with the same name already exists");return false}};this.unregisterExtension=function(e){if(!S(e)){throw"Illegal argument type: extension name must be a string"}var t=false;for(var n=0;n<v.length;++n){var r=v[n];if(r.name==e){v.splice(n,1);t=true;k("Unregistered extension",e);var i=r.extension;if(x(i.unregistered)){i.unregistered()}break}}return t};this.getExtension=function(e){for(var t=0;t<v.length;++t){var n=v[t];if(n.name==e){return n.extension}}return null};this.getName=function(){return n};this.getClientId=function(){return a};this.getURL=function(){return w.url};this.getTransport=function(){return s};this.getConfiguration=function(){return E(true,{},w)};this.getAdvice=function(){return E(true,{},m)}}