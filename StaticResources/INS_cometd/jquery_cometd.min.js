(function(e){function t(e,t){if(t){for(var n in t){if(n.toLowerCase()==="content-type"){continue}e.setRequestHeader(n,t[n])}}}function n(){var n=new org.cometd.LongPollingTransport;var r=org.cometd.Transport.derive(n);r.xhrSend=function(n){return e.ajax({url:n.url,async:n.sync!==true,type:"POST",contentType:"application/json;charset=UTF-8",data:n.body,beforeSend:function(e){t(e,n.headers);return true},success:n.onSuccess,error:function(e,t,r){n.onError(t,r)}})};return r}function r(){var n=new org.cometd.CallbackPollingTransport;var r=org.cometd.Transport.derive(n);r.jsonpSend=function(n){e.ajax({url:n.url,async:n.sync!==true,type:"GET",dataType:"jsonp",jsonp:"jsonp",data:{message:n.body},beforeSend:function(e){t(e,n.headers);return true},success:n.onSuccess,error:function(e,t,r){n.onError(t,r)}})};return r}org.cometd.JSON.toJSON=JSON.stringify;org.cometd.JSON.fromJSON=JSON.parse;e.Cometd=function(e){var t=new org.cometd.Cometd(e);if(window.WebSocket){t.registerTransport("websocket",new org.cometd.WebSocketTransport)}t.registerTransport("long-polling",new n);t.registerTransport("callback-polling",new r);return t};e.cometd=new e.Cometd})(jQuery)